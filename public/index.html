<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>å…ƒæ°—ã‚’é€ã‚‹ï¼</title>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
  <h1>å…ƒæ°—ã‚’é€ã‚ã†ï¼âš¡</h1>
  <input id="nameInput" placeholder="åå‰ã‚’å…¥åŠ›" />
  <button id="joinBtn">å‚åŠ ï¼</button>
  <button id="sendBtn" disabled>é€ã‚‹ï¼</button>

  <script>
    const socket = io("https://nodaserver-production.up.railway.app");
    const nameInput = document.getElementById("nameInput");
    const joinBtn = document.getElementById("joinBtn");
    const sendBtn = document.getElementById("sendBtn");
    let canTap = false;

    joinBtn.onclick = () => {
      socket.emit("join", nameInput.value || "åç„¡ã—");
      joinBtn.disabled = true;
    };

    sendBtn.onclick = () => {
       if (canTap) {
        console.log("Clicked!"); // <- ã“ã“ã§ãƒ­ã‚°ãŒå‡ºã‚‹ã‹ç¢ºèª
        socket.emit("power", 1);
      }
    };

    socket.on("gameStarted", () => {
      canTap = true;
      sendBtn.disabled = false;
      alert("ğŸ”¥ é–‹å§‹ï¼");
    });

    socket.on("gameEnded", (leaderboard) => {
      canTap = false;
      sendBtn.disabled = true;
      alert("ğŸ çµ‚äº†ï¼çµæœã‚’ç¢ºèªï¼");
      console.table(leaderboard);
    });
  </script>
</body>
</html>